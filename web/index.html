<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Codex History Manager</title>
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <main class="app-shell">
      <header class="topbar">
        <div>
          <p class="eyebrow">community utility</p>
          <h1>Codex History Manager</h1>
          <p class="subline">Local batch management for Codex conversation history.</p>
          <p id="config-info" class="muted"></p>
        </div>
        <div class="top-actions">
          <button id="refresh-all" class="btn ghost">Refresh</button>
          <button id="cleanup-expired" class="btn warning">Cleanup Expired Trash</button>
        </div>
      </header>

      <section class="notice" role="note">
        Unofficial community tool. Not affiliated with OpenAI.
      </section>

      <section id="feedback" class="feedback" aria-live="polite"></section>

      <nav class="tabs" role="tablist">
        <button id="tab-active" class="tab active" role="tab" aria-selected="true">
          Active
        </button>
        <button id="tab-archived" class="tab" role="tab" aria-selected="false">
          Archived
        </button>
        <button id="tab-trash" class="tab" role="tab" aria-selected="false">Trash</button>
      </nav>

      <section id="view-active" class="card view">
        <div class="controls">
          <input id="active-query" type="search" placeholder="Search active sessions" />
          <button id="active-select-filtered" class="btn ghost">Select Filtered</button>
          <button id="active-clear-selection" class="btn ghost">Clear Selection</button>
        </div>

        <div class="batch-actions">
          <button id="active-action-archive" class="btn primary">Archive</button>
          <button id="active-action-delete" class="btn danger">Move To Trash</button>
          <span id="active-selection-meta" class="muted"></span>
        </div>

        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th><input id="active-check-all" type="checkbox" /></th>
                <th>Title</th>
                <th>Thread</th>
                <th>Filename</th>
                <th>Updated</th>
                <th>Size</th>
                <th>Relative Path</th>
              </tr>
            </thead>
            <tbody id="active-body"></tbody>
          </table>
        </div>
      </section>

      <section id="view-archived" class="card view hidden">
        <div class="controls">
          <input id="archived-query" type="search" placeholder="Search archived sessions" />
          <button id="archived-select-filtered" class="btn ghost">Select Filtered</button>
          <button id="archived-clear-selection" class="btn ghost">Clear Selection</button>
        </div>

        <div class="batch-actions">
          <button id="archived-action-unarchive" class="btn primary">Unarchive</button>
          <button id="archived-action-delete" class="btn danger">Move To Trash</button>
          <span id="archived-selection-meta" class="muted"></span>
        </div>

        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th><input id="archived-check-all" type="checkbox" /></th>
                <th>Title</th>
                <th>Thread</th>
                <th>Filename</th>
                <th>Updated</th>
                <th>Size</th>
                <th>Relative Path</th>
              </tr>
            </thead>
            <tbody id="archived-body"></tbody>
          </table>
        </div>
      </section>

      <section id="view-trash" class="card view hidden">
        <div class="controls">
          <input id="trash-query" type="search" placeholder="Search trash by id or filename" />
          <button id="trash-select-filtered" class="btn ghost">Select Filtered</button>
          <button id="trash-clear-selection" class="btn ghost">Clear Selection</button>
        </div>

        <div class="batch-actions">
          <button id="action-restore" class="btn primary">Restore</button>
          <button id="action-purge" class="btn danger">Permanent Delete</button>
          <span id="trash-selection-meta" class="muted"></span>
        </div>

        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th><input id="trash-check-all" type="checkbox" /></th>
                <th>Expired</th>
                <th>Thread</th>
                <th>Deleted At</th>
                <th>Expires At</th>
                <th>Size</th>
                <th>Original Path</th>
                <th>Trash Id</th>
              </tr>
            </thead>
            <tbody id="trash-body"></tbody>
          </table>
        </div>
      </section>
    </main>

    <div id="confirm-modal" class="modal hidden" aria-hidden="true">
      <div id="confirm-backdrop" class="modal-backdrop"></div>
      <section
        class="modal-dialog"
        role="dialog"
        aria-modal="true"
        aria-labelledby="confirm-title"
        aria-describedby="confirm-message"
      >
        <h2 id="confirm-title">Confirm</h2>
        <p id="confirm-message" class="modal-message"></p>
        <div class="modal-actions">
          <button id="confirm-cancel" class="btn ghost">Cancel</button>
          <button id="confirm-accept" class="btn danger">Confirm</button>
        </div>
      </section>
    </div>

    <script src="/app.js"></script>
  </body>
</html>
